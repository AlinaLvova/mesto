(()=>{"use strict";var e={658:(e,t,n)=>{e.exports=n.p+"dc92bdd4d48a42a27aef.jpg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e="#cards-list-template";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var o=function(){function e(t,n,r,o){var i=o.handleCardClick,a=o.handleRemoveCard,u=o.handleAddLikeClick,c=o.handleDeleteLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._id=t._id,this._owner=t.owner,this._isOwner=n,this._templateSelector=r,this._handleCardClick=i,this._handleAddLikeClick=u,this._handleRemoveCard=a,this._handleDeleteLikeClick=c,this._remove=this._remove.bind(this)}var t,o;return t=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"toggleLike",value:function(){this._likeButton.classList.toggle("card__like_active")}},{key:"_remove",value:function(){this._handleRemoveCard(this._id)}},{key:"delete",value:function(){this._element.remove(),this._element=null}},{key:"updateCounterLikes",value:function(e){this._element.querySelector(".card__like-counter").textContent=e>0?e:""}},{key:"_renderLikeIcon",value:function(){var e=this;this._likes.forEach((function(){e._isOwner&&e._element.querySelector(".card__like").classList.add("card__like_active")}))}},{key:"_setEventListener",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likeButton.classList.contains("card__like_active")?e._handleDeleteLikeClick():e._handleAddLikeClick()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._cardImage.addEventListener("error",(function(t){e._cardImage.src=n(658)}))}},{key:"getCard",value:function(){return this}},{key:"_renderTrashIcon",value:function(){var e=this;this._isOwner&&(this._deleteButton=this._element.querySelector(".card__delete"),this._deleteButton.classList.add("card__delete_active"),this._deleteButton.addEventListener("click",(function(){e._handleRemoveCard(e._id)})))}},{key:"generate",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._cardImage=this._element.querySelector(".card__image"),this._element.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt="Фото пользователя "+this._name,this.updateCounterLikes(this._likes.length),this._renderTrashIcon(),this._renderLikeIcon(),this._setEventListener(),this._element}}])&&r(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formValidate=n,this._inputList=Array.from(this._formValidate.querySelectorAll(this._inputSelector)),this._submitButtonElement=this._formValidate.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_hideInputError",value:function(e){var t=this._formValidate.querySelector(".".concat(e.id,"-error"));t.classList.remove(this._errorClass),t.textContent="",e.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(e){var t=this._formValidate.querySelector(".".concat(e.id,"-error"));t.classList.add(this._errorClass),t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._submitButtonElement.classList.add(this._inactiveButtonClass),this._submitButtonElement.disabled=!0):(this._submitButtonElement.classList.remove(this._inactiveButtonClass),this._submitButtonElement.disabled=!1)}},{key:"_setEventListener",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t),t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._element.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._element.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._element.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t,n=e.containerSelector,r=e.handleSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmitForm=r,t._form=t._element.querySelector(".popup__form"),t._inputList=t._element.querySelectorAll(".popup__input-field"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._form.querySelector(".popup__submit-btn").textContent=e}},{key:"setEventListeners",value:function(){var e=this;y(d(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm(e._getInputValues())}))}},{key:"close",value:function(){this._form.reset(),y(d(a.prototype),"close",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._element.querySelector(".popup__image"),t._figcaption=t._element.querySelector(".popup__figcaption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._image.src=t,this._figcaption.textContent=e,this._image.alt="Пользовательское описание - ".concat(e,"."),_(S(a.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var L=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._element=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._element.prepend(e)}},{key:"clear",value:function(){this._element.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(t),this._userAbout=document.querySelector(n),this._avatar=document.querySelector(r),this._avatar.alt="Аватар"}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent,id:this._id}}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userAbout.textContent=t}},{key:"setAvatar",value:function(e){this._avatar.src=e}},{key:"setId",value:function(e){this._id=e}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e,t){return e.ok?e.json():Promise.reject(new Error("Ошибка: ".concat(res.status,". Сообщение об ошибке: ").concat(t)))}},{key:"sentCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e,"Данные добавленной карты не были успешно получены сервером")}))}},{key:"updateUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then((function(e){return n._handleResponse(e,"Данные о пользователе не были успешно обновлены на сервере")}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return t._handleResponse(e,"Фото аватара не было успешно обновлено на сервере")}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers,method:"GET"}).then((function(t){return e._handleResponse(t,"Данные о пользователе не были успешно получены")}))}},{key:"setLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{headers:this.headers,method:"PUT"}).then((function(e){return t._handleResponse(e,"Данные о добавлении лайка карточке от попользователе не были успешно обновлены на сервере")}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{headers:this.headers,method:"DELETE"}).then((function(e){return t._handleResponse(e,"Данные об удалении лайка карточке от попользователе не были успешно обновлены на сервере")}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{headers:this.headers,method:"DELETE"}).then((function(e){return t._handleResponse(e,"Данные о карточке попользователе не были успешно удалены на сервере")}))}},{key:"getCardList",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"GET"}).then((function(t){return e._handleResponse(t,"Данные о списке карт не были успешно получены")}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._form=t._element.querySelector(".popup__form"),t._handleSubmit=void 0,t}return t=a,(n=[{key:"open",value:function(e){var t=e.handleSubmit;q(U(a.prototype),"open",this).call(this),this._handleSubmit=t}},{key:"close",value:function(){q(U(a.prototype),"close",this).call(this),this._handleSubmit=void 0}},{key:"setEventListeners",value:function(){var e=this;q(U(a.prototype),"setEventListeners",this).call(this),this.btn=document.querySelector(".popup__submit-btn"),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=new T({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{Authorization:"615ec7c0-c05d-4e3c-8fba-c9ef3b1c5572","Content-Type":"application/json"}}),N=document.querySelector(".profile__edit-button"),F=document.querySelector(".profile__add-button"),$=document.querySelector(".profile__avatar-button"),H=new k("#popup-open-img");H.setEventListeners();var J,M={};J={formSelector:".popup__form",inputSelector:".popup__input-field",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__submit-btn_disabled",inputErrorClass:"popup__input-field_type_error",errorClass:"popup__input-field-error_visible"},Array.from(document.querySelectorAll(J.formSelector)).forEach((function(e){var t=new u(J,e),n=e.getAttribute("name");M[n]=t,t.enableValidation()}));var G=new x("#popup-confirmation");function z(e,t,n){var r=new o(e,t,n,{handleCardClick:function(e,t){H.open(e,t)},handleAddLikeClick:function(){D.setLike(e._id).then((function(e){r.toggleLike(),r.updateCounterLikes(e.likes.length)})).catch((function(e){console.log(e.message)}))},handleDeleteLikeClick:function(){D.deleteLike(e._id).then((function(e){r.toggleLike(),r.updateCounterLikes(e.likes.length)})).catch((function(e){console.log(e.message)}))},handleRemoveCard:function(e){G.open({handleSubmit:function(){D.deleteCard(e).then((function(){r.delete()})).catch((function(e){console.log(e.message)})).finally((function(){G.close()}))}})}});return r.generate()}G.setEventListeners();var K=new L({renderer:function(t){var n=z(t,t.owner._id===Q.getUserInfo().id,e);K.addItem(n)}},".gallery__list");Promise.all([D.getUserInfo(),D.getCardList()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q.setUserInfo(o.name,o.about),Q.setAvatar(o.avatar),Q.setId(o._id),K.renderItems(i.reverse())})).catch((function(e){console.log(e.message)}));var Q=new C(".profile__name",".profile__about",".profile__avatar");G.setEventListeners();var W=new v({containerSelector:"#popup-edit-form",handleSubmitForm:function(e){W.renderLoading("Обновление..."),D.updateUserInfo(e["user-name"],e["user-about"]).then((function(e){Q.setUserInfo(e.name,e.about),W.close()})).catch((function(e){console.log(e.message)})).finally((function(){W.renderLoading("Сохранить")}))}});W.setEventListeners(),N.addEventListener("click",(function(){var e=Q.getUserInfo(),t=e.name,n=e.about;W.setInputValues({"user-name":t,"user-about":n}),W.open(),M["edit-form"].resetValidation()}));var X=new v({containerSelector:"#popup-update-avatar",handleSubmitForm:function(e){X.renderLoading("Обновление аватара..."),D.updateAvatar(e["input-link-on-avatar"]).then((function(e){Q.setAvatar(e.avatar),X.close()})).catch((function(e){console.log(e.message)})).finally((function(){X.renderLoading("Сохранить")}))}});X.setEventListeners(),$.addEventListener("click",(function(){X.open(),M["update-avatar-form"].resetValidation()}));var Y=new v({containerSelector:"#popup-add-form",handleSubmitForm:function(t){Y.renderLoading("Сохранение..."),D.sentCard(t).then((function(t){K.addItem(z(t,!0,e)),Y.close()})).catch((function(e){console.log(e.message)})).finally((function(){Y.renderLoading("Создать")}))}});Y.setEventListeners(),F.addEventListener("click",(function(){Y.open(),M["add-form"].resetValidation()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUkvRyxFQUFjLENBQ3hDUCxrQkFBbUIsdUJBQ25CUSxpQkFBa0IsU0FBQ3dHLEdBQ2pCTSxFQUFnQkwsY0FBYyx5QkFDOUIvQyxFQUNHcUQsYUFBYVAsRUFBUyx5QkFDdEJyRCxNQUFLLFNBQUN3RCxHQUNMaEIsRUFBS1EsVUFBVVEsRUFBU3pFLFFBQ3hCNEUsRUFBZ0JqSCxPQUNsQixJQUNDb0YsT0FBTSxTQUFDbkksR0FDTm9JLFFBQVFDLElBQUlySSxFQUFNc0ksUUFDcEIsSUFDQ0ksU0FBUSxXQUNQc0IsRUFBZ0JMLGNBQWMsWUFDaEMsR0FDSixJQUdGSyxFQUFnQjlDLG9CQUdoQkYsRUFBbUJuSCxpQkFBaUIsU0FBUyxXQUMzQ21LLEVBQWdCaEMsT0FDaEJiLEVBQWUsc0JBQXNCNEMsaUJBQ3ZDLElBR0EsSUFBTUcsRUFBbUIsSUFBSWpILEVBQWMsQ0FDekNQLGtCQUFtQixrQkFDbkJRLGlCQUFrQixTQUFDekYsR0FDakJ5TSxFQUFpQlAsY0FBYyxpQkFDL0IvQyxFQUNHdUQsU0FBUzFNLEdBQ1Q0SSxNQUFLLFNBQUN3QixHQUNMZSxFQUFTRyxRQUFRbkIsRUFBV0MsR0FBVSxFQUFNdEssSUFDNUMyTSxFQUFpQm5ILE9BQ25CLElBQ0NvRixPQUFNLFNBQUNuSSxHQUNOb0ksUUFBUUMsSUFBSXJJLEVBQU1zSSxRQUNwQixJQUNDSSxTQUFRLFdBQ1B3QixFQUFpQlAsY0FBYyxVQUNqQyxHQUNKLElBSUZPLEVBQWlCaEQsb0JBR2pCSCxFQUFVbEgsaUJBQWlCLFNBQVMsV0FDbENxSyxFQUFpQmxDLE9BQ2pCYixFQUFlLFlBQVk0QyxpQkFDN0IsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCLQkNGA0YXRi9C3XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcItCn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YxcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0JjQstCw0L3QvtCy0L5cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcItCa0LDQvNGH0LDRgtC60LBcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0KXQvtC70LzQvtCz0L7RgNGB0LrQuNC5INGA0LDQudC+0L1cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0JHQsNC50LrQsNC7XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZVNlbGVjdG9yQ2FyZCA9IFwiI2NhcmRzLWxpc3QtdGVtcGxhdGVcIjtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgaXNPd25lcixcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IsXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlUmVtb3ZlQ2FyZCwgaGFuZGxlQWRkTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVMaWtlQ2xpY2sgfVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyO1xyXG4gICAgdGhpcy5faXNPd25lciA9IGlzT3duZXI7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIC8v0YTRg9C90LrRhtC40Y8g0L7RgtC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LAg0YEg0LrQsNGA0YLQuNC90LrQvtC5INC/0L4g0LrQu9C40LrRgyDQvdCwINC60LDRgNGC0L7Rh9C60YNcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUFkZExpa2VDbGljayA9IGhhbmRsZUFkZExpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQgPSBoYW5kbGVSZW1vdmVDYXJkO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlTGlrZUNsaWNrID0gaGFuZGxlRGVsZXRlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fcmVtb3ZlID0gdGhpcy5fcmVtb3ZlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8v0YTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLRh9C40LrQsCDQvdCw0LbQsNGC0LjRjyDQvdCwINC70LDQudC6INC60LDRgNGC0L7Rh9C60LhcclxuICB0b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlQ2FyZCh0aGlzLl9pZCk7XHJcbiAgfVxyXG5cclxuICBkZWxldGUoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvL9C+0LHQvdC+0LLQuNGC0Ywg0LrQvtC70LjRh9C10YHRgtCy0L4g0LvQsNC50LrQvtCyXHJcbiAgdXBkYXRlQ291bnRlckxpa2VzKGNvdW50ZXIpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPVxyXG4gICAgICBjb3VudGVyID4gMCA/IGNvdW50ZXIgOiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLy/QvtGC0YDQuNGB0L7QstC60LAg0LvQsNC50LrQvtCyINGDINGC0LXRhSDQutCw0YDRgtC+0YfQtdC6LCDQutC+0YLQvtGA0YvQtSDQv9C+0L3RgNCw0LLQuNC70LjRgdGMINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjlxyXG4gIF9yZW5kZXJMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VzLmZvckVhY2goKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faXNPd25lcikge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIilcclxuICAgICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xpa2VfYWN0aXZlXCIpKVxyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUxpa2VDbGljaygpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5faGFuZGxlQWRkTGlrZUNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xyXG4gICAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gcmVxdWlyZSgnLi4vaW1hZ2VzLzQwNC1QYWdlLmpwZycpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGdldENhcmQoKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIC8v0L7RgtGA0LjRgdC+0LLQsNGC0Ywg0LjQutC+0L3QutGDIFwi0YPQtNCw0LvQuNGC0YxcIiDRgtC+0LvRjNC60L4g0YMg0LrQsNGA0YLQvtGH0LXQuiDQstC70LDQtNC10LvRjNGG0LBcclxuICBfcmVuZGVyVHJhc2hJY29uKCkge1xyXG4gICAgaWYgKHRoaXMuX2lzT3duZXIpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcclxuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19kZWxldGVfYWN0aXZlXCIpO1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkKHRoaXMuX2lkKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gXCLQpNC+0YLQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gXCIgKyB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMudXBkYXRlQ291bnRlckxpa2VzKHRoaXMuX2xpa2VzLmxlbmd0aCk7XHJcbiAgICB0aGlzLl9yZW5kZXJUcmFzaEljb24oKTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VJY29uKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybVZhbGlkYXRlKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtVmFsaWRhdGUgPSBmb3JtVmFsaWRhdGU7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtVmFsaWRhdGUucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtVmFsaWRhdGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/RgdC60YDRi9GC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1XHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybVZhbGlkYXRlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LrQsNC30LDRgtGMINGB0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtVxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1WYWxpZGF0ZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0LrQsCDRgyDQuNC90L/Rg9GC0L7QsiDQvdCwINGB0LLQvtC50YHRgtCy0L4gdmFsaWRpdHlcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8v0L/RgNC+0LLQtdGA0LrQsCDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMINCy0YHQtdGFINC/0L7Qu9C10Lkg0LIg0YTQvtGA0LzQtVxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICAvL9C/0LXRgNC10LrQu9GO0YfQuNGC0Ywg0YHQvtGB0YLQvtGP0L3QuNC1INC60L3QvtC/0LrQuCDQvdCwINCw0LrRgtC40LLQvdC+0LUv0L3QtdCw0LrRgtC40LLQvdC+0LVcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/QvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQuNC90L/Rg9GCINC00LvRjyDQstGB0LXRhSDRhNC+0YDQvFxyXG4gIF9zZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcclxuICAgIC8vINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC30LDQutGA0YvRgtC40Y8g0L3QsCDQutGA0LXRgdGC0LjQulxyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgLy/QtNC+0LHQsNCy0LjRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INC00LvRjyDQt9Cw0LrRgNGL0YLQuNGPINC/0L4gb3ZlcmxheVxyXG4gICAgdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBjb250YWluZXJTZWxlY3RvciwgaGFuZGxlU3VibWl0Rm9ybSB9KSB7XHJcbiAgICBzdXBlcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtID0gaGFuZGxlU3VibWl0Rm9ybTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICAvLyDRgdC/0LjRgdC+0Log0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyINC/0L7Qu9C10LlcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXQtZmllbGRcIik7XHJcbiAgfVxyXG5cclxuICAvL9GB0L7QsdGA0LDRgtGMINC00LDQvdC90YvQtSDQstGB0LXRhSDQv9C+0LvQtdC5INGE0L7RgNC80YtcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvLyDRgdC+0LfQtNCw0ZHQvCDQv9GD0YHRgtC+0Lkg0L7QsdGK0LXQutGCXHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcblxyXG4gICAgLy8g0LTQvtCx0LDQstC70Y/QtdC8INCyINGN0YLQvtGCINC+0LHRitC10LrRgiDQt9C90LDRh9C10L3QuNGPINCy0YHQtdGFINC/0L7Qu9C10LlcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQstC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YrQtdC60YIg0LfQvdCw0YfQtdC90LjQuVxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvL9C30LDQv9C+0LvQvdC40YLRjCDQv9C+0LvRjyDRhNC+0YDQvNGLINC00LDQvdC90YvQvNC4XHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyh0ZXh0KSB7XHJcbiAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idG5cIikudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ZpZ2NhcHRpb24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ZpZ2NhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKHRpdGxlSW1hZ2UsIGxpbmtJbWFnZSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGlua0ltYWdlO1xyXG4gICAgdGhpcy5fZmlnY2FwdGlvbi50ZXh0Q29udGVudCA9IHRpdGxlSW1hZ2U7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBg0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GM0YHQutC+0LUg0L7Qv9C40YHQsNC90LjQtSAtICR7dGl0bGVJbWFnZX0uYDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtTGlzdCkge1xyXG4gICAgdGhpcy5jbGVhcigpO1xyXG5cclxuICAgIGl0ZW1MaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJBYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXRTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhci5hbHQgPSBcItCQ0LLQsNGC0LDRgFwiO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgaWQ6IHRoaXMuX2lkLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHVzZXJOYW1lLCB1c2VyQWJvdXQpIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyQWJvdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgc2V0SWQoaWQpIHtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgLy8g0YTRg9C90LrRhtC40Y8g0L7QsdGA0LDQsdC+0YLQutC4INGA0LXQt9GD0LvRjNGC0LDRgtCwINC+0YLQstC10YLQsCDRgdC10YDQstC10YDQsFxyXG4gIF9oYW5kbGVSZXNwb25zZShyZXNwb25zZSwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcclxuICAgICAgbmV3IEVycm9yKGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c30uINCh0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtTogJHtlcnJvck1lc3NhZ2V9YClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBzZW50Q2FyZCh7IG5hbWUsIGxpbmsgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgXCLQlNCw0L3QvdGL0LUg0LTQvtCx0LDQstC70LXQvdC90L7QuSDQutCw0YDRgtGLINC90LUg0LHRi9C70Lgg0YPRgdC/0LXRiNC90L4g0L/QvtC70YPRh9C10L3RiyDRgdC10YDQstC10YDQvtC8XCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/QvtCx0L3QvtCy0LvQtdC90LjQtSDQtNCw0L3QvdGL0YUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC90LAg0YHQtdGA0LLQtdGA0LVcclxuICB1cGRhdGVVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgXCLQlNCw0L3QvdGL0LUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC90LUg0LHRi9C70Lgg0YPRgdC/0LXRiNC90L4g0L7QsdC90L7QstC70LXQvdGLINC90LAg0YHQtdGA0LLQtdGA0LVcIlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9C+0LHQvdC+0LLQuNGC0Ywg0LDQstCw0YLQsNGAXHJcbiAgdXBkYXRlQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIFwi0KTQvtGC0L4g0LDQstCw0YLQsNGA0LAg0L3QtSDQsdGL0LvQviDRg9GB0L/QtdGI0L3QviDQvtCx0L3QvtCy0LvQtdC90L4g0L3QsCDRgdC10YDQstC10YDQtVwiXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0L/QvtC70YPRh9C40YLRjCDQuNC90YTQvtGA0LzQsNGG0LjRjiDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQv9C+0LvRg9GH0LXQvdGLXCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0YHRgtCw0LLQuNGC0Ywg0LvQsNC50Log0LrQsNGA0YLQvtGH0LrQtVxyXG4gIHNldExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIFwi0JTQsNC90L3Ri9C1INC+INC00L7QsdCw0LLQu9C10L3QuNC4INC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQtSDQvtGCINC/0L7Qv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQvtCx0L3QvtCy0LvQtdC90Ysg0L3QsCDRgdC10YDQstC10YDQtVwiXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0YPQsdGA0LDRgtGMINC70LDQudC6INGBINC60LDRgNGC0L7Rh9C60LhcclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQvtCxINGD0LTQsNC70LXQvdC40Lgg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC1INC+0YIg0L/QvtC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdC1INCx0YvQu9C4INGD0YHQv9C10YjQvdC+INC+0LHQvdC+0LLQu9C10L3RiyDQvdCwINGB0LXRgNCy0LXRgNC1XCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/Rg9C00LDQu9C40YLRjCDQutCw0YDRgtC+0YfQutGDINC/0L4gaWRcclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQviDQutCw0YDRgtC+0YfQutC1INC/0L7Qv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDRg9C00LDQu9C10L3RiyDQvdCwINGB0LXRgNCy0LXRgNC1XCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LvRg9GH0LjRgtGMINGB0L/QuNGB0L7QuiDQutCw0YDRgtC+0YfQtdC6XHJcbiAgZ2V0Q2FyZExpc3QoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgXCLQlNCw0L3QvdGL0LUg0L4g0YHQv9C40YHQutC1INC60LDRgNGCINC90LUg0LHRi9C70Lgg0YPRgdC/0LXRiNC90L4g0L/QvtC70YPRh9C10L3Ri1wiXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBwb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgaGFuZGxlU3VibWl0IH0pIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ0blwiKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgdGVtcGxhdGVTZWxlY3RvckNhcmQgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MFwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIEF1dGhvcml6YXRpb246IFwiNjE1ZWM3YzAtYzA1ZC00ZTNjLThmYmEtYzllZjNiMWM1NTcyXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59O1xyXG5cclxuLy9hcGlcclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maWcpO1xyXG5cclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuY29uc3QgdXBkYXRlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xyXG5cclxuLy/Qv9C+0L/QsNC/INGBINGD0LLQtdC70LjRh9C10L3QvdC+0Lkg0LrQsNGA0YLQuNC90LrQvtC5XHJcbmNvbnN0IGNhcmRJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLW9wZW4taW1nXCIpO1xyXG5cclxuLy/Rg9GB0YLQsNC90L7QstC40YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGB0L7QsdGL0YLQuNC5INC90LAg0L/QvtC/0LDQvyDRgSDQutCw0YDRgtC40L3QutC+0LlcclxuY2FyZEltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8vY29uZmlnINC00LvRjyDQstCw0LvQuNC00LDRhtC40Lgg0YTQvtGA0LxcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0LWZpZWxkXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fc3VibWl0LWJ0bl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZmllbGRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWZpZWxkLWVycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8v0LzQsNGB0YHQuNCyINGE0L7RgNC8INCy0LDQu9C40LTQsNGG0LjQuFxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuLy8g0JLQutC70Y7Rh9C10L3QuNC1INCy0LDQu9C40LTQsNGG0LjQuFxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICAvLyDQv9C+0LvRg9GH0LDQtdC8INC00LDQvdC90YvQtSDQuNC3INCw0YLRgNC40LHRg9GC0LAgYG5hbWVgINGDINGE0L7RgNC80YtcclxuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuXHJcbiAgICAvL9CyINC+0LHRitC10LrRgiDQt9Cw0L/QuNGB0YvQstCw0LXQvCDQv9C+0LQg0LjQvNC10L3QtdC8INGE0L7RgNC80YtcclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLy/Qv9C+0L/QsNC/IFwi0L/QvtC00YLQstC10YDQtNC40YLRjCDRg9C00LDQu9C10L3QuNC1XCJcclxuY29uc3QgcG9wdXBDb25maXJtRGVsZXRlID0gbmV3IFBvcHVwQ29uZmlybShcIiNwb3B1cC1jb25maXJtYXRpb25cIik7XHJcbnBvcHVwQ29uZmlybURlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL9GP0LLQu9GP0LXRgtGB0Y8g0LvQuCDQstC70LDQtNC10LvRjNGG0LXQvD8gaXMgb3duZXI/XHJcbmNvbnN0IGlzT3duZXIgPSAoaWRDYXJkKSA9PiB7XHJcbiAgcmV0dXJuIGlkQ2FyZC5vd25lci5faWQgPT09IHVzZXIuZ2V0VXNlckluZm8oKS5pZCA/IHRydWUgOiBmYWxzZTtcclxufTtcclxuXHJcbi8v0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4LiBfdGVtcGxhdGVTZWxlY3RvckNhcmQg0L3QtdC+0LHRhdC+0LTQuNC8INC00LvRjyDQstGL0LHQvtGA0LAg0YLQuNC/0LAg0L/QvtC60LDQt9CwINC60LDRgNGC0L7Rh9C60Lgo0LPQvtGA0LjQt9C+0L3RgtCw0LvRjNC90L7Qs9C+INC40LvQuCDQv9C+INGD0LzQvtC70YfQsNC90LjRjilcclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhQ2FyZCwgX2lzT3duZXIsIF90ZW1wbGF0ZVNlbGVjdG9yQ2FyZCkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhQ2FyZCwgX2lzT3duZXIsIF90ZW1wbGF0ZVNlbGVjdG9yQ2FyZCwge1xyXG4gICAgaGFuZGxlQ2FyZENsaWNrOiAodGl0bGVJbWFnZSwgbGlua0ltYWdlKSA9PiB7XHJcbiAgICAgIGNhcmRJbWFnZVBvcHVwLm9wZW4odGl0bGVJbWFnZSwgbGlua0ltYWdlKTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVBZGRMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLnNldExpa2UoZGF0YUNhcmQuX2lkKVxyXG4gICAgICAgIC50aGVuKChkYXRhQ2FyZCkgPT4ge1xyXG4gICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgICBjYXJkLnVwZGF0ZUNvdW50ZXJMaWtlcyhkYXRhQ2FyZC5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlRGVsZXRlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5kZWxldGVMaWtlKGRhdGFDYXJkLl9pZClcclxuICAgICAgICAudGhlbigoZGF0YUNhcmQpID0+IHtcclxuICAgICAgICAgIGNhcmQudG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgICAgY2FyZC51cGRhdGVDb3VudGVyTGlrZXMoZGF0YUNhcmQubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZVJlbW92ZUNhcmQ6IChkYXRhQ2FyZCkgPT4ge1xyXG4gICAgICBwb3B1cENvbmZpcm1EZWxldGUub3Blbih7XHJcbiAgICAgICAgaGFuZGxlU3VibWl0OiAoKSA9PiB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmRlbGV0ZUNhcmQoZGF0YUNhcmQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkLmRlbGV0ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICBwb3B1cENvbmZpcm1EZWxldGUuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlKCk7XHJcbn1cclxuXHJcbi8v0YHQvtC30LTQsNC90LjQtSDRgdC/0LjRgdC60LAg0LrQsNGA0YLQvtGH0LXQuiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRj1xyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBfaXNPd25lciA9IGlzT3duZXIoaXRlbSk7XHJcbiAgICAgIC8v0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0sIF9pc093bmVyLCB0ZW1wbGF0ZVNlbGVjdG9yQ2FyZCk7XHJcbiAgICAgIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFxyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmdhbGxlcnlfX2xpc3RcIlxyXG4pO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZExpc3QoKV0pXHJcbiAgLnRoZW4oKFtpbmZvRGF0YSwgY2FyZExpc3REYXRhXSkgPT4ge1xyXG4gICAgdXNlci5zZXRVc2VySW5mbyhpbmZvRGF0YS5uYW1lLCBpbmZvRGF0YS5hYm91dCk7XHJcbiAgICB1c2VyLnNldEF2YXRhcihpbmZvRGF0YS5hdmF0YXIpO1xyXG4gICAgdXNlci5zZXRJZChpbmZvRGF0YS5faWQpO1xyXG4gICAgY2FyZExpc3QucmVuZGVySXRlbXMoY2FyZExpc3REYXRhLnJldmVyc2UoKSk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxuICB9KTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy/Qv9C+0L/QsNC/0YtcclxuXHJcbi8v0YHQvtC30LTQsNC90LjQtSDQvtCx0YrQtdC60YLQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70YxcclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyhcclxuICBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgXCIucHJvZmlsZV9fYWJvdXRcIixcclxuICBcIi5wcm9maWxlX19hdmF0YXJcIlxyXG4pO1xyXG5cclxucG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9GB0L7Qt9C00LDQvdC40LUg0L7QsdGK0LXQutGC0LAg0YTQvtGA0LzRiyDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQtNCw0L3QvdGL0YUg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgY29udGFpbmVyU2VsZWN0b3I6IFwiI3BvcHVwLWVkaXQtZm9ybVwiLFxyXG4gIGhhbmRsZVN1Ym1pdEZvcm06IChmb3JtRGF0YSkgPT4ge1xyXG4gICAgcG9wdXBQcm9maWxlRm9ybS5yZW5kZXJMb2FkaW5nKFwi0J7QsdC90L7QstC70LXQvdC40LUuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVVzZXJJbmZvKGZvcm1EYXRhW1widXNlci1uYW1lXCJdLCBmb3JtRGF0YVtcInVzZXItYWJvdXRcIl0pXHJcbiAgICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xyXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8odXNlckRhdGEubmFtZSwgdXNlckRhdGEuYWJvdXQpO1xyXG4gICAgICAgIHBvcHVwUHJvZmlsZUZvcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBQcm9maWxlRm9ybS5yZW5kZXJMb2FkaW5nKFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8v0L7QsdGA0LDQsdC+0YLQuNGH0LjQuiDRgdC+0LHRi9GC0LjQuSDQtNC70Y8g0YTQvtGA0LzRi1xyXG5wb3B1cFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINGA0LXQtNCw0LrRgtC40YDQvtCy0LDRgtGMINC00LDQvdC90YvQtVxyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIHBvcHVwUHJvZmlsZUZvcm0uc2V0SW5wdXRWYWx1ZXMoeyBcInVzZXItbmFtZVwiOiBuYW1lLCBcInVzZXItYWJvdXRcIjogYWJvdXQgfSk7XHJcbiAgcG9wdXBQcm9maWxlRm9ybS5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJlZGl0LWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy/QvtCx0YrQtdC60YIg0L/QvtC/0LDQvyDQtNC70Y8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuY29uc3QgcG9wdXBBdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIiNwb3B1cC11cGRhdGUtYXZhdGFyXCIsXHJcbiAgaGFuZGxlU3VibWl0Rm9ybTogKGZvcm1EYXRhKSA9PiB7XHJcbiAgICBwb3B1cEF2YXRhckZvcm0ucmVuZGVyTG9hZGluZyhcItCe0LHQvdC+0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwLi4uXCIpO1xyXG4gICAgYXBpXHJcbiAgICAgIC51cGRhdGVBdmF0YXIoZm9ybURhdGFbXCJpbnB1dC1saW5rLW9uLWF2YXRhclwiXSlcclxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlci5zZXRBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuICAgICAgICBwb3B1cEF2YXRhckZvcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBBdmF0YXJGb3JtLnJlbmRlckxvYWRpbmcoXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxucG9wdXBBdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINC/0L7QvNC10L3Rj9GC0Ywg0LDQstCw0YLQsNGAXHJcbnVwZGF0ZUF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyRm9ybS5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbXCJ1cGRhdGUtYXZhdGFyLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy/QvtCx0YrQtdC60YIg0YTQvtGA0LzRiyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XHJcbmNvbnN0IHBvcHVwQWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgY29udGFpbmVyU2VsZWN0b3I6IFwiI3BvcHVwLWFkZC1mb3JtXCIsXHJcbiAgaGFuZGxlU3VibWl0Rm9ybTogKGRhdGEpID0+IHtcclxuICAgIHBvcHVwQWRkQ2FyZEZvcm0ucmVuZGVyTG9hZGluZyhcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZW50Q2FyZChkYXRhKVxyXG4gICAgICAudGhlbigoZGF0YUNhcmQpID0+IHtcclxuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZGF0YUNhcmQsIHRydWUsIHRlbXBsYXRlU2VsZWN0b3JDYXJkKSk7XHJcbiAgICAgICAgcG9wdXBBZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cEFkZENhcmRGb3JtLnJlbmRlckxvYWRpbmcoXCLQodC+0LfQtNCw0YLRjFwiKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vL9GD0YHRgtCw0L3QvtCy0LjRgtGMINGB0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjQuSDQvdCwXHJcbnBvcHVwQWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0LTQvtCx0LDQstC40YLRjCDQutCw0YDRgtC+0YfQutGDXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwQWRkQ2FyZEZvcm0ub3BlbigpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW1wiYWRkLWZvcm1cIl0ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwidGVtcGxhdGVTZWxlY3RvckNhcmQiLCJDYXJkIiwiZGF0YSIsImlzT3duZXIiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlUmVtb3ZlQ2FyZCIsImhhbmRsZUFkZExpa2VDbGljayIsImhhbmRsZURlbGV0ZUxpa2VDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX293bmVyIiwib3duZXIiLCJfaXNPd25lciIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVBZGRMaWtlQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQ2FyZCIsIl9oYW5kbGVEZWxldGVMaWtlQ2xpY2siLCJfcmVtb3ZlIiwiYmluZCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsImNvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJfY2FyZEltYWdlIiwiZXJyb3IiLCJyZXF1aXJlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9nZXRUZW1wbGF0ZSIsImFsdCIsInVwZGF0ZUNvdW50ZXJMaWtlcyIsIl9yZW5kZXJUcmFzaEljb24iLCJfcmVuZGVyTGlrZUljb24iLCJfc2V0RXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtVmFsaWRhdGUiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybVZhbGlkYXRlIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uRWxlbWVudCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJQb3B1cCIsImNvbnRhaW5lclNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZvcm0iLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9mb3JtIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwidGV4dCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX2ZpZ2NhcHRpb24iLCJ0aXRsZUltYWdlIiwibGlua0ltYWdlIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiaXRlbSIsInByZXBlbmQiLCJpbm5lckhUTUwiLCJpdGVtTGlzdCIsImNsZWFyIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXQiLCJfYXZhdGFyIiwiYWJvdXQiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsImF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwicmVzcG9uc2UiLCJlcnJvck1lc3NhZ2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwicmVzIiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJjYXJkSWQiLCJwb3B1cENvbmZpcm0iLCJfaGFuZGxlU3VibWl0IiwiaGFuZGxlU3VibWl0IiwiYnRuIiwiYXBpIiwiQXV0aG9yaXphdGlvbiIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJ1cGRhdGVBdmF0YXJCdXR0b24iLCJjYXJkSW1hZ2VQb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwQ29uZmlybURlbGV0ZSIsIlBvcHVwQ29uZmlybSIsImNyZWF0ZUNhcmQiLCJkYXRhQ2FyZCIsIl90ZW1wbGF0ZVNlbGVjdG9yQ2FyZCIsImNhcmQiLCJvcGVuIiwic2V0TGlrZSIsInRvZ2dsZUxpa2UiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJtZXNzYWdlIiwiZGVsZXRlTGlrZSIsImRlbGV0ZUNhcmQiLCJkZWxldGUiLCJmaW5hbGx5IiwiZ2VuZXJhdGUiLCJjYXJkTGlzdCIsInVzZXIiLCJnZXRVc2VySW5mbyIsImFkZEl0ZW0iLCJhbGwiLCJnZXRDYXJkTGlzdCIsImluZm9EYXRhIiwiY2FyZExpc3REYXRhIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJzZXRJZCIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsInBvcHVwUHJvZmlsZUZvcm0iLCJmb3JtRGF0YSIsInJlbmRlckxvYWRpbmciLCJ1cGRhdGVVc2VySW5mbyIsInVzZXJEYXRhIiwic2V0SW5wdXRWYWx1ZXMiLCJyZXNldFZhbGlkYXRpb24iLCJwb3B1cEF2YXRhckZvcm0iLCJ1cGRhdGVBdmF0YXIiLCJwb3B1cEFkZENhcmRGb3JtIiwic2VudENhcmQiXSwic291cmNlUm9vdCI6IiJ9