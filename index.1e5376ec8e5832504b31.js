(()=>{"use strict";var e={658:(e,t,n)=>{e.exports=n.p+"dc92bdd4d48a42a27aef.jpg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e="#cards-list-template";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}var o=function(){function e(t,n,r,o){var i=o.handleCardClick,a=o.handleRemoveCard,u=o.handleAddLikeClick,c=o.handleDeleteLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._likes=t.likes,this._id=t._id,this._owner=t.owner,this._isOwner=n,this._templateSelector=r,this._handleCardClick=i,this._handleAddLikeClick=u,this._handleRemoveCard=a,this._handleDeleteLikeClick=c,this._remove=this._remove.bind(this)}var t,o;return t=e,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}},{key:"toggleLike",value:function(){this._likeButton.classList.toggle("card__like_active")}},{key:"_remove",value:function(){this._handleRemoveCard(this._id)}},{key:"delete",value:function(){this._element.remove(),this._element=null}},{key:"updateCounterLikes",value:function(e){this._element.querySelector(".card__like-counter").textContent=e>0?e:""}},{key:"_renderLikeIcon",value:function(){var e=this;this._likes.forEach((function(){e._isOwner&&e._element.querySelector(".card__like").classList.add("card__like_active")}))}},{key:"_setEventListener",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._likeButton.classList.contains("card__like_active")?e._handleDeleteLikeClick():e._handleAddLikeClick()})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._cardImage.addEventListener("error",(function(t){e._cardImage.src=n(658)}))}},{key:"getCard",value:function(){return this}},{key:"_renderTrashIcon",value:function(){var e=this;this._isOwner&&(this._deleteButton=this._element.querySelector(".card__delete"),this._deleteButton.classList.add("card__delete_active"),this._deleteButton.addEventListener("click",(function(){e._handleRemoveCard(e._id)})))}},{key:"generate",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._cardImage=this._element.querySelector(".card__image"),this._element.querySelector(".card__title").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt="Фото пользователя "+this._name,this.updateCounterLikes(this._likes.length),this._renderTrashIcon(),this._renderLikeIcon(),this._setEventListener(),this._element}}])&&r(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formValidate=n,this._inputList=Array.from(this._formValidate.querySelectorAll(this._inputSelector)),this._submitButtonElement=this._formValidate.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_hideInputError",value:function(e){var t=this._formValidate.querySelector(".".concat(e.id,"-error"));t.classList.remove(this._errorClass),t.textContent="",e.classList.remove(this._inputErrorClass)}},{key:"_showInputError",value:function(e){var t=this._formValidate.querySelector(".".concat(e.id,"-error"));t.classList.add(this._errorClass),t.textContent=e.validationMessage,e.classList.add(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._submitButtonElement.classList.add(this._inactiveButtonClass),this._submitButtonElement.disabled=!0):(this._submitButtonElement.classList.remove(this._inactiveButtonClass),this._submitButtonElement.disabled=!1)}},{key:"_setEventListener",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t),t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListener()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._element.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._element.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__close-btn").addEventListener("click",(function(){return e.close()})),this._element.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===f(o)?o:String(o)),r)}var o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t,n=e.containerSelector,r=e.handleSubmitForm;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleSubmitForm=r,t._form=t._element.querySelector(".popup__form"),t._inputList=t._element.querySelectorAll(".popup__input-field"),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"renderLoading",value:function(e){this._form.querySelector(".popup__submit-btn").textContent=e}},{key:"setEventListeners",value:function(){var e=this;y(d(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmitForm(e._getInputValues())}))}},{key:"close",value:function(){this._form.reset(),y(d(a.prototype),"close",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._element.querySelector(".popup__image"),t._figcaption=t._element.querySelector(".popup__figcaption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._image.src=t,this._figcaption.textContent=e,this._image.alt="Пользовательское описание - ".concat(e,"."),_(S(a.prototype),"open",this).call(this)}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var L=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._element=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._element.prepend(e)}},{key:"clear",value:function(){this._element.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}var C=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(t),this._userAbout=document.querySelector(n),this._avatar=document.querySelector(r),this._avatar.alt="Аватар"}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent,id:this._id}}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userAbout.textContent=t}},{key:"setAvatar",value:function(e){this._avatar.src=e}},{key:"setId",value:function(e){this._id=e}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e,t){return e.ok?e.json():Promise.reject(new Error("Ошибка: ".concat(res.status,". Сообщение об ошибке: ").concat(t)))}},{key:"sentCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._handleResponse(e,"Данные добавленной карты не были успешно получены сервером")}))}},{key:"updateUserInfo",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers,method:"PATCH",body:JSON.stringify({name:e,about:t})}).then((function(e){return n._handleResponse(e,"Данные о пользователе не были успешно обновлены на сервере")}))}},{key:"updateAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{headers:this.headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return t._handleResponse(e,"Фото аватара не было успешно обновлено на сервере")}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers,method:"GET"}).then((function(t){return e._handleResponse(t,"Данные о пользователе не были успешно получены")}))}},{key:"setLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{headers:this.headers,method:"PUT"}).then((function(e){return t._handleResponse(e,"Данные о добавлении лайка карточке от попользователе не были успешно обновлены на сервере")}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{headers:this.headers,method:"DELETE"}).then((function(e){return t._handleResponse(e,"Данные об удалении лайка карточке от попользователе не были успешно обновлены на сервере")}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{headers:this.headers,method:"DELETE"}).then((function(e){return t._handleResponse(e,"Данные о карточке попользователе не были успешно удалены на сервере")}))}},{key:"getCardList",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"GET"}).then((function(t){return e._handleResponse(t,"Данные о списке карт не были успешно получены")}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=U(r);if(o){var n=U(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._form=t._element.querySelector(".popup__form"),t._handleSubmit=void 0,t}return t=a,(n=[{key:"open",value:function(e){var t=e.handleSubmit;q(U(a.prototype),"open",this).call(this),this._handleSubmit=t}},{key:"close",value:function(){q(U(a.prototype),"close",this).call(this),this._handleSubmit=void 0}},{key:"setEventListeners",value:function(){var e=this;q(U(a.prototype),"setEventListeners",this).call(this),this.btn=document.querySelector(".popup__submit-btn"),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=new T({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{Authorization:"615ec7c0-c05d-4e3c-8fba-c9ef3b1c5572","Content-Type":"application/json"}}),N=document.querySelector(".profile__edit-button"),F=document.querySelector(".profile__add-button"),$=document.querySelector(".profile__avatar-button"),H=new k("#popup-open-img");H.setEventListeners();var J,M={};J={formSelector:".popup__form",inputSelector:".popup__input-field",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__submit-btn_disabled",inputErrorClass:"popup__input-field_type_error",errorClass:"popup__input-field-error_visible"},Array.from(document.querySelectorAll(J.formSelector)).forEach((function(e){var t=new u(J,e),n=e.getAttribute("name");M[n]=t,t.enableValidation()}));var G=new x("#popup-confirmation");function z(e,t,n){var r=new o(e,t,n,{handleCardClick:function(e,t){H.open(e,t)},handleAddLikeClick:function(){D.setLike(e._id).then((function(e){r.toggleLike(),r.updateCounterLikes(e.likes.length)})).catch((function(e){console.log(e.message)}))},handleDeleteLikeClick:function(){D.deleteLike(e._id).then((function(e){r.toggleLike(),r.updateCounterLikes(e.likes.length)})).catch((function(e){console.log(e.message)}))},handleRemoveCard:function(e){G.open({handleSubmit:function(){D.deleteCard(e).then((function(){r.delete()})).catch((function(e){console.log(e.message)})).finally((function(){G.close()}))}})}});return r.generate()}G.setEventListeners();var K=new L({renderer:function(t){var n=z(t,t.owner._id===Q.getUserInfo().id,e);K.addItem(n)}},".gallery__list");Promise.all([D.getUserInfo(),D.getCardList()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q.setUserInfo(o.name,o.about),Q.setAvatar(o.avatar),Q.setId(o._id),K.renderItems(i.reverse())})).catch((function(e){console.log(e.message)}));var Q=new C(".profile__name",".profile__about",".profile__avatar");G.setEventListeners();var W=new v({containerSelector:"#popup-edit-form",handleSubmitForm:function(e){W.renderLoading("Обновление..."),D.updateUserInfo(e["user-name"],e["user-about"]).then((function(e){Q.setUserInfo(e.name,e.about),W.close()})).catch((function(e){console.log(e.message)})).finally((function(){W.renderLoading("Сохранить")}))}});W.setEventListeners(),N.addEventListener("click",(function(){var e=Q.getUserInfo(),t=e.name,n=e.about;W.setInputValues({"user-name":t,"user-about":n}),W.open(),M["edit-form"].resetValidation()}));var X=new v({containerSelector:"#popup-update-avatar",handleSubmitForm:function(e){X.renderLoading("Обновление аватара..."),D.updateAvatar(e["input-link-on-avatar"]).then((function(e){Q.setAvatar(e.avatar),X.close()})).catch((function(e){console.log(e.message)})).finally((function(){X.renderLoading("Сохранить")}))}});X.setEventListeners(),$.addEventListener("click",(function(){X.open(),M["update-avatar-form"].resetValidation()}));var Y=new v({containerSelector:"#popup-add-form",handleSubmitForm:function(t){Y.renderLoading("Сохранение..."),D.sentCard(t).then((function(t){K.addItem(z(t,!0,e))})).catch((function(e){console.log(e.message)})).finally((function(){Y.renderLoading("Создать")}))}});Y.setEventListeners(),F.addEventListener("click",(function(){Y.open(),M["add-form"].resetValidation()}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUkvRyxFQUFjLENBQ3hDUCxrQkFBbUIsdUJBQ25CUSxpQkFBa0IsU0FBQ3dHLEdBQ2pCTSxFQUFnQkwsY0FBYyx5QkFDOUIvQyxFQUNHcUQsYUFBYVAsRUFBUyx5QkFDdEJyRCxNQUFLLFNBQUN3RCxHQUNMaEIsRUFBS1EsVUFBVVEsRUFBU3pFLFFBQ3hCNEUsRUFBZ0JqSCxPQUNsQixJQUNDb0YsT0FBTSxTQUFDbkksR0FDTm9JLFFBQVFDLElBQUlySSxFQUFNc0ksUUFDcEIsSUFDQ0ksU0FBUSxXQUNQc0IsRUFBZ0JMLGNBQWMsWUFDaEMsR0FDSixJQUdGSyxFQUFnQjlDLG9CQUdoQkYsRUFBbUJuSCxpQkFBaUIsU0FBUyxXQUMzQ21LLEVBQWdCaEMsT0FDaEJiLEVBQWUsc0JBQXNCNEMsaUJBQ3ZDLElBR0EsSUFBTUcsRUFBbUIsSUFBSWpILEVBQWMsQ0FDekNQLGtCQUFtQixrQkFDbkJRLGlCQUFrQixTQUFDekYsR0FDakJ5TSxFQUFpQlAsY0FBYyxpQkFDL0IvQyxFQUNHdUQsU0FBUzFNLEdBQ1Q0SSxNQUFLLFNBQUN3QixHQUNMZSxFQUFTRyxRQUFRbkIsRUFBV0MsR0FBVSxFQUFNdEssR0FDOUMsSUFDQzRLLE9BQU0sU0FBQ25JLEdBQ05vSSxRQUFRQyxJQUFJckksRUFBTXNJLFFBQ3BCLElBQ0NJLFNBQVEsV0FDUHdCLEVBQWlCUCxjQUFjLFVBQ2pDLEdBQ0osSUFJRk8sRUFBaUJoRCxvQkFHakJILEVBQVVsSCxpQkFBaUIsU0FBUyxXQUNsQ3FLLEVBQWlCbEMsT0FDakJiLEVBQWUsWUFBWTRDLGlCQUM3QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcItCQ0YDRhdGL0LdcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2Fya2h5ei5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjFwiLFxyXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCLQmNCy0LDQvdC+0LLQvlwiLFxyXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvaXZhbm92by5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwi0JrQsNC80YfQsNGC0LrQsFwiLFxyXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2FtY2hhdGthLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCLQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCLQkdCw0LnQutCw0LtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2JhaWthbC5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlU2VsZWN0b3JDYXJkID0gXCIjY2FyZHMtbGlzdC10ZW1wbGF0ZVwiO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBpc093bmVyLFxyXG4gICAgdGVtcGxhdGVTZWxlY3RvcixcclxuICAgIHsgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVSZW1vdmVDYXJkLCBoYW5kbGVBZGRMaWtlQ2xpY2ssIGhhbmRsZURlbGV0ZUxpa2VDbGljayB9XHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XHJcbiAgICB0aGlzLl9pc093bmVyID0gaXNPd25lcjtcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgLy/RhNGD0L3QutGG0LjRjyDQvtGC0LrRgNGL0YLQuNGPINC/0L7Qv9Cw0L/QsCDRgSDQutCw0YDRgtC40L3QutC+0Lkg0L/QviDQutC70LjQutGDINC90LAg0LrQsNGA0YLQvtGH0LrRg1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlQWRkTGlrZUNsaWNrID0gaGFuZGxlQWRkTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlQ2FyZCA9IGhhbmRsZVJlbW92ZUNhcmQ7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlQ2xpY2sgPSBoYW5kbGVEZWxldGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9yZW1vdmUgPSB0aGlzLl9yZW1vdmUuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLy/RhNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINC90LDQttCw0YLQuNGPINC90LAg0LvQsNC50Log0LrQsNGA0YLQvtGH0LrQuFxyXG4gIHRvZ2dsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9yZW1vdmUoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkKHRoaXMuX2lkKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZSgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8v0L7QsdC90L7QstC40YLRjCDQutC+0LvQuNGH0LXRgdGC0LLQviDQu9Cw0LnQutC+0LJcclxuICB1cGRhdGVDb3VudGVyTGlrZXMoY291bnRlcikge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRlclwiKS50ZXh0Q29udGVudCA9XHJcbiAgICAgIGNvdW50ZXIgPiAwID8gY291bnRlciA6IFwiXCI7XHJcbiAgfVxyXG5cclxuICAvL9C+0YLRgNC40YHQvtCy0LrQsCDQu9Cw0LnQutC+0LIg0YMg0YLQtdGFINC60LDRgNGC0L7Rh9C10LosINC60L7RgtC+0YDRi9C1INC/0L7QvdGA0LDQstC40LvQuNGB0Ywg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOXHJcbiAgX3JlbmRlckxpa2VJY29uKCkge1xyXG4gICAgdGhpcy5fbGlrZXMuZm9yRWFjaCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLl9pc093bmVyKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKVxyXG4gICAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZV9hY3RpdmVcIikpXHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlTGlrZUNsaWNrKCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlQ2xpY2soKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSByZXF1aXJlKCcuLi9pbWFnZXMvNDA0LVBhZ2UuanBnJyk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuXHJcbiAgLy/QvtGC0YDQuNGB0L7QstCw0YLRjCDQuNC60L7QvdC60YMgXCLRg9C00LDQu9C40YLRjFwiINGC0L7Qu9GM0LrQviDRgyDQutCw0YDRgtC+0YfQtdC6INCy0LvQsNC00LXQu9GM0YbQsFxyXG4gIF9yZW5kZXJUcmFzaEljb24oKSB7XHJcbiAgICBpZiAodGhpcy5faXNPd25lcikge1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlXCIpO1xyXG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2RlbGV0ZV9hY3RpdmVcIik7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQodGhpcy5faWQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdlbmVyYXRlKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBcItCk0L7RgtC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyBcIiArIHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy51cGRhdGVDb3VudGVyTGlrZXModGhpcy5fbGlrZXMubGVuZ3RoKTtcclxuICAgIHRoaXMuX3JlbmRlclRyYXNoSWNvbigpO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZUljb24oKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtVmFsaWRhdGUpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1WYWxpZGF0ZSA9IGZvcm1WYWxpZGF0ZTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1WYWxpZGF0ZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1WYWxpZGF0ZS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9GB0LrRgNGL0YLRjCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtVmFsaWRhdGUucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvL9C/0L7QutCw0LfQsNGC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybVZhbGlkYXRlLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAvLyDQv9GA0L7QstC10YDQutCwINGDINC40L3Qv9GD0YLQvtCyINC90LAg0YHQstC+0LnRgdGC0LLQviB2YWxpZGl0eVxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy/Qv9GA0L7QstC10YDQutCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LLRgdC10YUg0L/QvtC70LXQuSDQsiDRhNC+0YDQvNC1XHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIC8v0L/QtdGA0LXQutC70Y7Rh9C40YLRjCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INC90LAg0LDQutGC0LjQstC90L7QtS/QvdC10LDQutGC0LjQstC90L7QtVxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC40L3Qv9GD0YIg0LTQu9GPINCy0YHQtdGFINGE0L7RgNC8XHJcbiAgX3NldEV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnRuXCIpO1xyXG4gICAgLy8g0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0LfQsNC60YDRi9GC0LjRjyDQvdCwINC60YDQtdGB0YLQuNC6XHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcbiAgICAvL9C00L7QsdCw0LLQuNGC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC30LDQutGA0YvRgtC40Y8g0L/QviBvdmVybGF5XHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IGNvbnRhaW5lclNlbGVjdG9yLCBoYW5kbGVTdWJtaXRGb3JtIH0pIHtcclxuICAgIHN1cGVyKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIC8vINGB0L/QuNGB0L7QuiDQstGB0LXRhSDRjdC70LXQvNC10L3RgtC+0LIg0L/QvtC70LXQuVxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dC1maWVsZFwiKTtcclxuICB9XHJcblxyXG4gIC8v0YHQvtCx0YDQsNGC0Ywg0LTQsNC90L3Ri9C1INCy0YHQtdGFINC/0L7Qu9C10Lkg0YTQvtGA0LzRi1xyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vINGB0L7Qt9C00LDRkdC8INC/0YPRgdGC0L7QuSDQvtCx0YrQtdC60YJcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICAvLyDQtNC+0LHQsNCy0LvRj9C10Lwg0LIg0Y3RgtC+0YIg0L7QsdGK0LXQutGCINC30L3QsNGH0LXQvdC40Y8g0LLRgdC10YUg0L/QvtC70LXQuVxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCy0L7Qt9Cy0YDQsNGJ0LDQtdC8INC+0LHRitC10LrRgiDQt9C90LDRh9C10L3QuNC5XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIC8v0LfQsNC/0L7Qu9C90LjRgtGMINC/0L7Qu9GPINGE0L7RgNC80Ysg0LTQsNC90L3Ri9C80LhcclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKHRleHQpIHtcclxuICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ0blwiKS50ZXh0Q29udGVudCA9IHRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fZmlnY2FwdGlvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZmlnY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4odGl0bGVJbWFnZSwgbGlua0ltYWdlKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rSW1hZ2U7XHJcbiAgICB0aGlzLl9maWdjYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGVJbWFnZTtcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGDQn9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60L7QtSDQvtC/0LjRgdCw0L3QuNC1IC0gJHt0aXRsZUltYWdlfS5gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1MaXN0KSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgaXRlbUxpc3QuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJBYm91dFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyLmFsdCA9IFwi0JDQstCw0YLQsNGAXCI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50LFxyXG4gICAgICBpZDogdGhpcy5faWQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlck5hbWUsIHVzZXJBYm91dCkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJBYm91dDtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG5cclxuICBzZXRJZChpZCkge1xyXG4gICAgdGhpcy5faWQgPSBpZDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyDRhNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQtdC30YPQu9GM0YLQsNGC0LAg0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwXHJcbiAgX2hhbmRsZVJlc3BvbnNlKHJlc3BvbnNlLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KFxyXG4gICAgICBuZXcgRXJyb3IoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfS4g0KHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1OiAke2Vycm9yTWVzc2FnZX1gKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHNlbnRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQtNC+0LHQsNCy0LvQtdC90L3QvtC5INC60LDRgNGC0Ysg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQv9C+0LvRg9GH0LXQvdGLINGB0LXRgNCy0LXRgNC+0LxcIlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9C+0LHQvdC+0LLQu9C10L3QuNC1INC00LDQvdC90YvRhSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QsCDRgdC10YDQstC10YDQtVxyXG4gIHVwZGF0ZVVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQvtCx0L3QvtCy0LvQtdC90Ysg0L3QsCDRgdC10YDQstC10YDQtVwiXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0L7QsdC90L7QstC40YLRjCDQsNCy0LDRgtCw0YBcclxuICB1cGRhdGVBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgXCLQpNC+0YLQviDQsNCy0LDRgtCw0YDQsCDQvdC1INCx0YvQu9C+INGD0YHQv9C10YjQvdC+INC+0LHQvdC+0LLQu9C10L3QviDQvdCwINGB0LXRgNCy0LXRgNC1XCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LvRg9GH0LjRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIFwi0JTQsNC90L3Ri9C1INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdC1INCx0YvQu9C4INGD0YHQv9C10YjQvdC+INC/0L7Qu9GD0YfQtdC90YtcIlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9C/0L7RgdGC0LDQstC40YLRjCDQu9Cw0LnQuiDQutCw0YDRgtC+0YfQutC1XHJcbiAgc2V0TGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UoXHJcbiAgICAgICAgcmVzcG9uc2UsXHJcbiAgICAgICAgXCLQlNCw0L3QvdGL0LUg0L4g0LTQvtCx0LDQstC70LXQvdC40Lgg0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC1INC+0YIg0L/QvtC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdC1INCx0YvQu9C4INGD0YHQv9C10YjQvdC+INC+0LHQvdC+0LLQu9C10L3RiyDQvdCwINGB0LXRgNCy0LXRgNC1XCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy/Rg9Cx0YDQsNGC0Ywg0LvQsNC50Log0YEg0LrQsNGA0YLQvtGH0LrQuFxyXG4gIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIFwi0JTQsNC90L3Ri9C1INC+0LEg0YPQtNCw0LvQtdC90LjQuCDQu9Cw0LnQutCwINC60LDRgNGC0L7Rh9C60LUg0L7RgiDQv9C+0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INC90LUg0LHRi9C70Lgg0YPRgdC/0LXRiNC90L4g0L7QsdC90L7QstC70LXQvdGLINC90LAg0YHQtdGA0LLQtdGA0LVcIlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9GD0LTQsNC70LjRgtGMINC60LDRgNGC0L7Rh9C60YMg0L/QviBpZFxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgfSkudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKFxyXG4gICAgICAgIHJlc3BvbnNlLFxyXG4gICAgICAgIFwi0JTQsNC90L3Ri9C1INC+INC60LDRgNGC0L7Rh9C60LUg0L/QvtC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdC1INCx0YvQu9C4INGD0YHQv9C10YjQvdC+INGD0LTQsNC70LXQvdGLINC90LAg0YHQtdGA0LLQtdGA0LVcIlxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL9C/0L7Qu9GD0YfQuNGC0Ywg0YHQv9C40YHQvtC6INC60LDRgNGC0L7Rh9C10LpcclxuICBnZXRDYXJkTGlzdCgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShcclxuICAgICAgICByZXNwb25zZSxcclxuICAgICAgICBcItCU0LDQvdC90YvQtSDQviDRgdC/0LjRgdC60LUg0LrQsNGA0YIg0L3QtSDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQv9C+0LvRg9GH0LXQvdGLXCJcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHVuZGVmaW5lZDtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBoYW5kbGVTdWJtaXQgfSkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnRuXCIpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyB0ZW1wbGF0ZVNlbGVjdG9yQ2FyZCB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBQb3B1cENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG5jb25zdCBhcGlDb25maWcgPSB7XHJcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgQXV0aG9yaXphdGlvbjogXCI2MTVlYzdjMC1jMDVkLTRlM2MtOGZiYS1jOWVmM2IxYzU1NzJcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG4vL2FwaVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUNvbmZpZyk7XHJcblxyXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCB1cGRhdGVBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1idXR0b25cIik7XHJcblxyXG4vL9C/0L7Qv9Cw0L8g0YEg0YPQstC10LvQuNGH0LXQvdC90L7QuSDQutCw0YDRgtC40L3QutC+0LlcclxuY29uc3QgY2FyZEltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXAtb3Blbi1pbWdcIik7XHJcblxyXG4vL9GD0YHRgtCw0L3QvtCy0LjRgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40Lkg0L3QsCDQv9C+0L/QsNC/INGBINC60LDRgNGC0LjQvdC60L7QuVxyXG5jYXJkSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuLy9jb25maWcg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDRhNC+0YDQvFxyXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtZmllbGRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdC1idG5cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1maWVsZF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZmllbGQtZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy/QvNCw0YHRgdC40LIg0YTQvtGA0Lwg0LLQsNC70LjQtNCw0YbQuNC4XHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG4vLyDQktC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcclxuICAgIC8vINC/0L7Qu9GD0YfQsNC10Lwg0LTQsNC90L3Ri9C1INC40Lcg0LDRgtGA0LjQsdGD0YLQsCBgbmFtZWAg0YMg0YTQvtGA0LzRi1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8v0LIg0L7QsdGK0LXQutGCINC30LDQv9C40YHRi9Cy0LDQtdC8INC/0L7QtCDQuNC80LXQvdC10Lwg0YTQvtGA0LzRi1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vL9C/0L7Qv9Cw0L8gXCLQv9C+0LTRgtCy0LXRgNC00LjRgtGMINGD0LTQsNC70LXQvdC40LVcIlxyXG5jb25zdCBwb3B1cENvbmZpcm1EZWxldGUgPSBuZXcgUG9wdXBDb25maXJtKFwiI3BvcHVwLWNvbmZpcm1hdGlvblwiKTtcclxucG9wdXBDb25maXJtRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8v0Y/QstC70Y/QtdGC0YHRjyDQu9C4INCy0LvQsNC00LXQu9GM0YbQtdC8PyBpcyBvd25lcj9cclxuY29uc3QgaXNPd25lciA9IChpZENhcmQpID0+IHtcclxuICByZXR1cm4gaWRDYXJkLm93bmVyLl9pZCA9PT0gdXNlci5nZXRVc2VySW5mbygpLmlkID8gdHJ1ZSA6IGZhbHNlO1xyXG59O1xyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LguIF90ZW1wbGF0ZVNlbGVjdG9yQ2FyZCDQvdC10L7QsdGF0L7QtNC40Lwg0LTQu9GPINCy0YvQsdC+0YDQsCDRgtC40L/QsCDQv9C+0LrQsNC30LAg0LrQsNGA0YLQvtGH0LrQuCjQs9C+0YDQuNC30L7QvdGC0LDQu9GM0L3QvtCz0L4g0LjQu9C4INC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOKVxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGFDYXJkLCBfaXNPd25lciwgX3RlbXBsYXRlU2VsZWN0b3JDYXJkKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGFDYXJkLCBfaXNPd25lciwgX3RlbXBsYXRlU2VsZWN0b3JDYXJkLCB7XHJcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICh0aXRsZUltYWdlLCBsaW5rSW1hZ2UpID0+IHtcclxuICAgICAgY2FyZEltYWdlUG9wdXAub3Blbih0aXRsZUltYWdlLCBsaW5rSW1hZ2UpO1xyXG4gICAgfSxcclxuICAgIGhhbmRsZUFkZExpa2VDbGljazogKCkgPT4ge1xyXG4gICAgICBhcGlcclxuICAgICAgICAuc2V0TGlrZShkYXRhQ2FyZC5faWQpXHJcbiAgICAgICAgLnRoZW4oKGRhdGFDYXJkKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcclxuICAgICAgICAgIGNhcmQudXBkYXRlQ291bnRlckxpa2VzKGRhdGFDYXJkLmxpa2VzLmxlbmd0aCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVEZWxldGVMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmRlbGV0ZUxpa2UoZGF0YUNhcmQuX2lkKVxyXG4gICAgICAgIC50aGVuKChkYXRhQ2FyZCkgPT4ge1xyXG4gICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgICBjYXJkLnVwZGF0ZUNvdW50ZXJMaWtlcyhkYXRhQ2FyZC5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlUmVtb3ZlQ2FyZDogKGRhdGFDYXJkKSA9PiB7XHJcbiAgICAgIHBvcHVwQ29uZmlybURlbGV0ZS5vcGVuKHtcclxuICAgICAgICBoYW5kbGVTdWJtaXQ6ICgpID0+IHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChkYXRhQ2FyZClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuZGVsZXRlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHBvcHVwQ29uZmlybURlbGV0ZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGUoKTtcclxufVxyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INGB0L/QuNGB0LrQsCDQutCw0YDRgtC+0YfQtdC6INC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IF9pc093bmVyID0gaXNPd25lcihpdGVtKTtcclxuICAgICAgLy/RgdC+0LfQtNCw0L3QuNC1INC60LDRgNGC0L7Rh9C60LhcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSwgX2lzT3duZXIsIHRlbXBsYXRlU2VsZWN0b3JDYXJkKTtcclxuICAgICAgLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZ2FsbGVyeV9fbGlzdFwiXHJcbik7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRDYXJkTGlzdCgpXSlcclxuICAudGhlbigoW2luZm9EYXRhLCBjYXJkTGlzdERhdGFdKSA9PiB7XHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKGluZm9EYXRhLm5hbWUsIGluZm9EYXRhLmFib3V0KTtcclxuICAgIHVzZXIuc2V0QXZhdGFyKGluZm9EYXRhLmF2YXRhcik7XHJcbiAgICB1c2VyLnNldElkKGluZm9EYXRhLl9pZCk7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkTGlzdERhdGEucmV2ZXJzZSgpKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gIH0pO1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL9C/0L7Qv9Cw0L/Ri1xyXG5cclxuLy/RgdC+0LfQtNCw0L3QuNC1INC+0LHRitC10LrRgtCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjFxyXG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKFxyXG4gIFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBcIi5wcm9maWxlX19hYm91dFwiLFxyXG4gIFwiLnByb2ZpbGVfX2F2YXRhclwiXHJcbik7XHJcblxyXG5wb3B1cENvbmZpcm1EZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0YHQvtC30LTQsNC90LjQtSDQvtCx0YrQtdC60YLQsCDRhNC+0YDQvNGLINC00LvRjyDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC00LDQvdC90YvRhSDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LVcclxuY29uc3QgcG9wdXBQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBjb250YWluZXJTZWxlY3RvcjogXCIjcG9wdXAtZWRpdC1mb3JtXCIsXHJcbiAgaGFuZGxlU3VibWl0Rm9ybTogKGZvcm1EYXRhKSA9PiB7XHJcbiAgICBwb3B1cFByb2ZpbGVGb3JtLnJlbmRlckxvYWRpbmcoXCLQntCx0L3QvtCy0LvQtdC90LjQtS4uLlwiKTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlVXNlckluZm8oZm9ybURhdGFbXCJ1c2VyLW5hbWVcIl0sIGZvcm1EYXRhW1widXNlci1hYm91dFwiXSlcclxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlci5zZXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dCk7XHJcbiAgICAgICAgcG9wdXBQcm9maWxlRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cFByb2ZpbGVGb3JtLnJlbmRlckxvYWRpbmcoXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy/QvtCx0YDQsNCx0L7RgtC40YfQuNC6INGB0L7QsdGL0YLQuNC5INC00LvRjyDRhNC+0YDQvNGLXHJcbnBvcHVwUHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0LTQsNC90L3Ri9C1XHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgcG9wdXBQcm9maWxlRm9ybS5zZXRJbnB1dFZhbHVlcyh7IFwidXNlci1uYW1lXCI6IG5hbWUsIFwidXNlci1hYm91dFwiOiBhYm91dCB9KTtcclxuICBwb3B1cFByb2ZpbGVGb3JtLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL9C+0LHRitC10LrRgiDQv9C+0L/QsNC/INC00LvRjyDQvtCx0L3QvtCy0LvQtdC90LjRjyDQsNCy0LDRgtCw0YDQsFxyXG5jb25zdCBwb3B1cEF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgY29udGFpbmVyU2VsZWN0b3I6IFwiI3BvcHVwLXVwZGF0ZS1hdmF0YXJcIixcclxuICBoYW5kbGVTdWJtaXRGb3JtOiAoZm9ybURhdGEpID0+IHtcclxuICAgIHBvcHVwQXZhdGFyRm9ybS5yZW5kZXJMb2FkaW5nKFwi0J7QsdC90L7QstC70LXQvdC40LUg0LDQstCw0YLQsNGA0LAuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZUF2YXRhcihmb3JtRGF0YVtcImlucHV0LWxpbmstb24tYXZhdGFyXCJdKVxyXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcclxuICAgICAgICB1c2VyLnNldEF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xyXG4gICAgICAgIHBvcHVwQXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cEF2YXRhckZvcm0ucmVuZGVyTG9hZGluZyhcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5wb3B1cEF2YXRhckZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0L3QsNC20LDRgtC40LUg0L3QsCDQutC90L7Qv9C60YMg0L/QvtC80LXQvdGP0YLRjCDQsNCy0LDRgtCw0YBcclxudXBkYXRlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXJGb3JtLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcInVwZGF0ZS1hdmF0YXItZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL9C+0LHRitC10LrRgiDRhNC+0YDQvNGLINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgcG9wdXBBZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBjb250YWluZXJTZWxlY3RvcjogXCIjcG9wdXAtYWRkLWZvcm1cIixcclxuICBoYW5kbGVTdWJtaXRGb3JtOiAoZGF0YSkgPT4ge1xyXG4gICAgcG9wdXBBZGRDYXJkRm9ybS5yZW5kZXJMb2FkaW5nKFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnNlbnRDYXJkKGRhdGEpXHJcbiAgICAgIC50aGVuKChkYXRhQ2FyZCkgPT4ge1xyXG4gICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhQ2FyZCwgdHJ1ZSwgdGVtcGxhdGVTZWxlY3RvckNhcmQpKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBBZGRDYXJkRm9ybS5yZW5kZXJMb2FkaW5nKFwi0KHQvtC30LTQsNGC0YxcIik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy/Rg9GB0YLQsNC90L7QstC40YLRjCDRgdC70YPRiNCw0YLQtdC70Lgg0YHQvtCx0YvRgtC40Lkg0L3QsFxyXG5wb3B1cEFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNC1INC90LAg0LrQvdC+0L/QutGDINC00L7QsdCw0LLQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRg1xyXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEFkZENhcmRGb3JtLm9wZW4oKTtcclxuICBmb3JtVmFsaWRhdG9yc1tcImFkZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsInRlbXBsYXRlU2VsZWN0b3JDYXJkIiwiQ2FyZCIsImRhdGEiLCJpc093bmVyIiwidGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZVJlbW92ZUNhcmQiLCJoYW5kbGVBZGRMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVMaWtlQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9pZCIsIl9vd25lciIsIm93bmVyIiwiX2lzT3duZXIiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlQWRkTGlrZUNsaWNrIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJfaGFuZGxlRGVsZXRlTGlrZUNsaWNrIiwiX3JlbW92ZSIsImJpbmQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJjb3VudGVyIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX2NhcmRJbWFnZSIsImVycm9yIiwicmVxdWlyZSIsIl9kZWxldGVCdXR0b24iLCJfZ2V0VGVtcGxhdGUiLCJhbHQiLCJ1cGRhdGVDb3VudGVyTGlrZXMiLCJfcmVuZGVyVHJhc2hJY29uIiwiX3JlbmRlckxpa2VJY29uIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybVZhbGlkYXRlIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1WYWxpZGF0ZSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiUG9wdXAiLCJjb250YWluZXJTZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfZm9ybSIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInRleHQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9maWdjYXB0aW9uIiwidGl0bGVJbWFnZSIsImxpbmtJbWFnZSIsIlNlY3Rpb24iLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIml0ZW0iLCJwcmVwZW5kIiwiaW5uZXJIVE1MIiwiaXRlbUxpc3QiLCJjbGVhciIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJBYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckFib3V0IiwiX2F2YXRhciIsImFib3V0IiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJhdmF0YXIiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsInJlc3BvbnNlIiwiZXJyb3JNZXNzYWdlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInJlcyIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwiY2FyZElkIiwicG9wdXBDb25maXJtIiwiX2hhbmRsZVN1Ym1pdCIsImhhbmRsZVN1Ym1pdCIsImJ0biIsImFwaSIsIkF1dGhvcml6YXRpb24iLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwidXBkYXRlQXZhdGFyQnV0dG9uIiwiY2FyZEltYWdlUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVNlbGVjdG9yIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cENvbmZpcm1EZWxldGUiLCJQb3B1cENvbmZpcm0iLCJjcmVhdGVDYXJkIiwiZGF0YUNhcmQiLCJfdGVtcGxhdGVTZWxlY3RvckNhcmQiLCJjYXJkIiwib3BlbiIsInNldExpa2UiLCJ0b2dnbGVMaWtlIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZSIsImRlbGV0ZUxpa2UiLCJkZWxldGVDYXJkIiwiZGVsZXRlIiwiZmluYWxseSIsImdlbmVyYXRlIiwiY2FyZExpc3QiLCJ1c2VyIiwiZ2V0VXNlckluZm8iLCJhZGRJdGVtIiwiYWxsIiwiZ2V0Q2FyZExpc3QiLCJpbmZvRGF0YSIsImNhcmRMaXN0RGF0YSIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwic2V0SWQiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJwb3B1cFByb2ZpbGVGb3JtIiwiZm9ybURhdGEiLCJyZW5kZXJMb2FkaW5nIiwidXBkYXRlVXNlckluZm8iLCJ1c2VyRGF0YSIsInNldElucHV0VmFsdWVzIiwicmVzZXRWYWxpZGF0aW9uIiwicG9wdXBBdmF0YXJGb3JtIiwidXBkYXRlQXZhdGFyIiwicG9wdXBBZGRDYXJkRm9ybSIsInNlbnRDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==